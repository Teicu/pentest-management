/*
 * Author: Damian Schwyrz <mail@damianschwyrz.de>
 * URL: https://www.damianschwyrz.de
 * Copyright (c) 2018.
 */

$(function () {
    updatePsauxFrame();

    setInterval(function () {
        updatePsauxFrame();
    }, 4500);


    $(document).on('click', '.kill-process', function (event) {
        event.preventDefault();
        var pid = $(this).data('pid');

        $.ajax({
            url: $(this).attr("href"),
            type: 'POST',
            data: {
                pid: pid
            },
            complete: function (result) {
                console.log(result);
                $(".psaux-" + pid).fadeOut();
            }
        });
    });

});

function updatePsauxFrame() {
    $("#psaux-update-spinner").removeClass("hidden");
    $.ajax({
        url: psaux_get_route,
        type: 'GET',
        success: function (result) {
            $("#psaux-out").html(result.output);
            $("#psaux-update-spinner").addClass("hidden");
        }
    });
}
